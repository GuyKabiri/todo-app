(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{103:function(e,t,a){},105:function(e,t,a){},112:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),s=(a(103),a(13)),l=a.n(s),o=a(27),u=a(20),m=a(21),d=a(22),h=a(25),f=a(24),p=(a(105),a(52)),b=a.n(p),E=(a(106),a(108),function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=v.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.email,c=new Date,e.prev=9,e.next=12,n.set(Object(o.a)({email:r,createdAt:c},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("Error creating user ",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}());b.a.initializeApp({apiKey:"AIzaSyAWOEjr1sJbPWtfQ2wXUsgJI6ljLnE7A5o",authDomain:"todo-app-132ab.firebaseapp.com",databaseURL:"https://todo-app-132ab.firebaseio.com",projectId:"todo-app-132ab",appId:"1:446221338901:web:201b323954bb867db2c11c"});var g=b.a.auth(),v=b.a.firestore(),w=(b.a,a(16)),x=a(10),j=(a(112),a(151)),k=a(155),y=a(156),S=a(32),O=a(176),C=function(e){var t=e.currentUser;return r.a.createElement(j.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{onClick:function(){g.signOut()},className:"link-with-icon"},"Log Out")),r.a.createElement(j.a,{item:!0},r.a.createElement(y.a,{to:"/",component:w.b},r.a.createElement(O.a,{color:"secondary"},r.a.createElement(S.a,null,t.firstName[0]+t.lastName[0])))))},N=(a(82),a(157)),U=a(158),A=function(){return r.a.createElement("div",null,r.a.createElement(k.a,{startIcon:r.a.createElement(N.a,{className:"link-with-icon"})},r.a.createElement(U.a,{to:"/auth",className:"link-with-icon",component:w.b,underline:"none"},"Log In / Sign Up")))},I=a(159),W=a(160),D=a(86),P=a.n(D),L=function(e){var t=e.currentUser;return r.a.createElement(I.a,{position:"sticky"},r.a.createElement(W.a,null,r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(j.a,{item:!0,xs:4},r.a.createElement(j.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(y.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(P.a,null))),r.a.createElement(j.a,{item:!0},r.a.createElement(S.a,{variant:"h6",noWrap:!0},"Todo")))),r.a.createElement(j.a,{item:!0},e.currentUser?r.a.createElement(C,{currentUser:t}):r.a.createElement(A,null)))))},_=a(70),T=a(35),F=(a(118),a(71)),J=a(161),M=a(162),q=a(163),z=a(175),B=a(164),H=a(165),K=a(166),Q=(a(119),a(88)),R=a.n(Q),X=a(87),$=a.n(X),G=a(89),V=a.n(G),Y=function(e){var t=e.item,a=t.id,c=t.title,i=t.text,s=t.checked,l=t.createdAt,o=e.toggle,u=e.deleteAction,m=Object(n.useState)(!0),d=Object(F.a)(m,2),h=d[0],f=d[1],p=r.a.useState(!1),b=Object(F.a)(p,2),E=b[0],g=b[1],v=l.toDate().toLocaleDateString("il-HE",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});return r.a.createElement(J.a,{in:h},r.a.createElement(M.a,{className:"card"},r.a.createElement(q.a,{action:r.a.createElement(z.a,{name:a,checked:s,onChange:o,color:"primary"}),title:r.a.createElement(S.a,{variant:"h6",className:"".concat(s?"checked":null," title")},c)}),r.a.createElement(B.a,{className:"card-content"},r.a.createElement(S.a,{variant:"body1",className:"".concat(s?"checked":null," text")},i)),i.length>280&&r.a.createElement(H.a,{in:E,timeout:"auto",unmountOnExit:!0},r.a.createElement(B.a,null,r.a.createElement(S.a,null,i))),r.a.createElement(K.a,null,r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",className:"action-section"},r.a.createElement(j.a,{item:!0},r.a.createElement(S.a,{variant:"caption",className:"date"},v.toString())),r.a.createElement(j.a,{item:!0},r.a.createElement(y.a,{component:w.b,to:"/add/".concat(a)},r.a.createElement($.a,null)),r.a.createElement(y.a,{component:w.b,to:"/",onClick:function(e){return function(e){f(!1),u(e)}(a)}},r.a.createElement(R.a,null)),i.length>280&&r.a.createElement(y.a,{onClick:function(){g(!E)},"aria-expanded":E,"aria-label":"show more"},r.a.createElement(V.a,null)))))))},Z=function(e){var t=e.items,a=function(a,n){for(var c=[],i=a;i<t.length;i+=n)c.push(t[i]);return c.map((function(t){return r.a.createElement(j.a,{item:!0,key:t.id,className:"item"},r.a.createElement(Y,{item:t,toggle:e.toggleChecked,deleteAction:e.deleteAction}))}))};return t?r.a.createElement(j.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(j.a,{container:!0,item:!0,xs:4,spacing:2,direction:"column",justify:"flex-start",alignItems:"center"},a(0,3)),r.a.createElement(j.a,{container:!0,item:!0,xs:4,spacing:2,direction:"column",justify:"flex-start",alignItems:"center"},a(1,3)),r.a.createElement(j.a,{container:!0,item:!0,xs:4,spacing:2,direction:"column",justify:"flex-start",alignItems:"center"},a(2,3))):null},ee=a(93),te=a(167),ae=a(168),ne=a(174),re=a(169),ce=a(171),ie=a(173),se=a(172),le=a(170),oe=function(e){var t=e.search,a=e.handleSearch;return r.a.createElement(ee.a,{elevation:3},r.a.createElement(te.a,{className:"fullwidth"},r.a.createElement(ae.a,null,r.a.createElement(ne.a,{id:"search",label:"Search",value:t,onChange:a,fullWidth:!0,margin:"dense",type:"text",variant:"outlined",InputProps:{startAdornment:r.a.createElement(re.a,{position:"start"},r.a.createElement(le.a,null))}})),r.a.createElement(ae.a,{button:!0,component:w.b,to:"/add"},r.a.createElement(ce.a,null,r.a.createElement(se.a,null)),r.a.createElement(ie.a,{primary:"Add Item"}))))},ue=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleChecked=function(e){var t=e.target.name,a=n.state.items.find((function(e){return e.id===t}));a.checked=!a.checked,n.setState((function(e){return{items:Object(_.a)(e.items.map((function(e){return e.id===t?a:e})))}}));try{v.collection("todos").doc(t).update({checked:a.checked})}catch(e){console.log(e.message)}},n.deleteAction=function(e){try{v.collection("todos").doc(e).delete().then((function(){return n.setState((function(t){return{items:Object(_.a)(t.items.filter((function(t){return t.id!==e})))}}))}))}catch(t){console.log(t.message)}},n.handleSearch=function(e){n.setState({search:e.target.value})},n.renderItem=function(e){return n.state.items.filter((function(t){return t.title.includes(e)||t.text.includes(e)}))},n.state=Object(o.a)(Object(o.a)({},e),{},{items:[],search:""}),n.toggleChecked.bind(Object(T.a)(n)),n.deleteAction.bind(Object(T.a)(n)),n.handleSearch.bind(Object(T.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.currentUser&&v.collection("todos").where("uid","==",this.state.currentUser.id).get().then((function(t){var a=[];t.forEach((function(e){a.push(Object(o.a)({id:e.id},e.data()))})),a.sort((function(e,t){return t.createdAt.toDate()-e.createdAt.toDate()})),e.setState({items:[].concat(a)})}))}},{key:"render",value:function(){return r.a.createElement(j.a,{container:!0,spacing:0},r.a.createElement(j.a,{item:!0,sm:3},r.a.createElement(oe,{currentUser:this.props.currentUser,search:this.state.search,handleSearch:this.handleSearch})),r.a.createElement(j.a,{item:!0,sm:9},r.a.createElement(Z,{items:this.renderItem(this.state.search),deleteAction:this.deleteAction,toggleChecked:this.toggleChecked})))}}]),a}(r.a.Component),me=a(28),de=(a(120),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t;n.setState((t={},Object(me.a)(t,e.target.id,e.target.value),Object(me.a)(t,"err",""),t))},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.email,c=a.password,r&&c){e.next=5;break}return n.setState({err:"All fields required!"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,g.signInWithEmailAndPassword(r,c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:"",err:""},n.handleChange.bind(n.handleChange),n.handleSubmit.bind(n.handleSubmit),n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{container:!0,className:"login-form"},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement(S.a,{variant:"h5"},"Log In"),r.a.createElement(ne.a,{id:"email",label:"Email",value:this.state.email,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"email"}),r.a.createElement(ne.a,{id:"password",label:"Password",value:this.state.password,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"password"}),r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{variant:"outlined",onClick:this.handleSubmit},"Log In")),r.a.createElement(j.a,{item:!0},r.a.createElement(S.a,{variant:"caption",color:"error"},this.state.err))))))}}]),a}(n.Component)),he=(a(121),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t;n.setState((t={},Object(me.a)(t,e.target.id,e.target.value),Object(me.a)(t,"err",""),t))},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,c,i,s,o,u,m,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.signup_email,c=a.signup_password,i=a.confirmPassword,s=a.firstName,o=a.lastName,c===i){e.next=7;break}return n.setState({err:"Passwords are not match!"}),e.abrupt("return");case 7:if(r&&c&&i&&s&&o){e.next=10;break}return n.setState({err:"All fields required!"}),e.abrupt("return");case 10:return e.prev=10,e.next=13,g.createUserWithEmailAndPassword(r,c);case 13:return u=e.sent,m=u.user,e.next=17,E(m,{firstName:s,lastName:o});case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(10),d=e.t0.message,n.setState({err:d});case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),n.state={signup_email:"",signup_password:"",confirmPassword:"",firstName:"",lastName:"",err:""},n.handleChange.bind(n.handleChange),n.handleSubmit.bind(n.handleSubmit),n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(j.a,{container:!0,className:"signup-form"},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement(S.a,{variant:"h5"},"Sign Up"),r.a.createElement(ne.a,{id:"signup_email",label:"Email",value:this.state.signup_email,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"email"}),r.a.createElement(ne.a,{id:"signup_password",label:"Password",value:this.state.signup_password,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"password"}),r.a.createElement(ne.a,{id:"confirmPassword",label:"Confirm Password",value:this.state.confirmPassword,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"password"}),r.a.createElement(j.a,{container:!0,spacing:1},r.a.createElement(j.a,{item:!0,sm:!0},r.a.createElement(ne.a,{id:"firstName",label:"First Name",value:this.state.firstName,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"text"})),r.a.createElement(j.a,{item:!0,sm:!0},r.a.createElement(ne.a,{id:"lastName",label:"Last Name",value:this.state.lastName,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"text"}))),r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{variant:"outlined",onClick:this.handleSubmit},"Sign Up")),r.a.createElement(j.a,{item:!0},r.a.createElement(S.a,{variant:"caption",color:"error"},this.state.err))))))}}]),a}(n.Component));function fe(e){return e.currentUser?r.a.createElement(x.a,{to:"/"}):r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1},r.a.createElement(j.a,{item:!0,xs:5},r.a.createElement(de,null)),r.a.createElement(j.a,{item:!0,xs:5},r.a.createElement(he,null)))}var pe=a(91),be=a.n(pe),Ee=a(90),ge=a.n(Ee),ve=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.id,r=t.value;n.setState(Object(me.a)({},a,r))},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.title,c=a.text,i=new Date,r){e.next=6;break}return n.setState({err:"Title is empty"}),e.abrupt("return");case 6:if(e.prev=6,!n.state.id){e.next=13;break}return e.next=10,v.collection("todos").doc(n.state.id).update({title:r,text:c,checked:!1,createdAt:i,uid:n.state.currentUser.id});case 10:n.setState({err:"updated"}),e.next=16;break;case 13:return e.next=15,v.collection("todos").add({title:r,text:c,checked:!1,createdAt:i,uid:n.state.currentUser.id});case 15:n.setState({title:"",text:"",err:""});case 16:n.state.history.push("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),n.state={id:e.match.params.id,title:"",text:"",err:"",currentUser:e.currentUser,history:n.props.history},n.handleSubmit.bind(Object(T.a)(n)),n.handleChange.bind(Object(T.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.id&&v.collection("todos").doc(this.state.id).get().then((function(t){if(t.exists){var a=t.data();e.setState(Object(o.a)({},a))}else e.setState({id:"",title:"",text:"",err:""})}))}},{key:"render",value:function(){return r.a.createElement(j.a,{container:!0,justify:"center",className:"create-item-form"},r.a.createElement(j.a,{item:!0,xs:9},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement(S.a,{variant:"h5"},"Add Todo"),r.a.createElement(ne.a,{id:"title",label:"Title",value:this.state.title,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"text"}),r.a.createElement(ne.a,{id:"text",label:"Text",value:this.state.text,onChange:this.handleChange,fullWidth:!0,margin:"dense",type:"text",multiline:!0,rows:10,variant:"outlined"}),r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(j.a,{item:!0},this.state.id?r.a.createElement(k.a,{variant:"outlined",onClick:this.handleSubmit,endIcon:r.a.createElement(ge.a,null)},"Save"):r.a.createElement(k.a,{variant:"outlined",onClick:this.handleSubmit,endIcon:r.a.createElement(be.a,null)},"Add")),r.a.createElement(j.a,{item:!0},r.a.createElement(S.a,{variant:"caption",color:"error"},this.state.err))))))}}]),a}(n.Component),we=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).unsubscribeFromAuth=null,e.state={currentUser:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=g.onAuthStateChanged(function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,E(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:Object(o.a)({id:t.id},t.data())})})),t.next=8;break;case 7:e.setState({currentUser:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,null,r.a.createElement(L,{currentUser:this.state.currentUser}),r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start",className:"bottom-section"},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(ue,Object.assign({},t,{currentUser:e.state.currentUser}))}}),r.a.createElement(x.b,{path:"/add/:id?",render:function(t){return r.a.createElement(ve,Object.assign({},t,{currentUser:e.state.currentUser}))}}),r.a.createElement(x.b,{path:"/auth",render:function(t){return r.a.createElement(fe,Object.assign({},t,{currentUser:e.state.currentUser}))}})),this.state.currentUser?null:r.a.createElement(x.a,{to:"/auth"}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){},98:function(e,t,a){e.exports=a(122)}},[[98,1,2]]]);
//# sourceMappingURL=main.95470e90.chunk.js.map